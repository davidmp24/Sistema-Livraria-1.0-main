{% extends "index.html" %}

{% block content %}
    <h1>Clientes</h1>

    <!-- Botão para exibir o formulário -->
    <button id="showFormButton" onclick="toggleForm()">Novo Cadastro</button>

    <!-- Formulário de cadastro, inicialmente oculto -->
    <form id="cadastroForm" method="POST" action="{{ url_for('clientes') }}" style="display: none; margin-top: 20px;">
        <label for="nome_completo">Nome Completo:</label>
        <input type="text" id="nome_completo" name="nome_completo" required>

        <label for="data_nascimento">Data de Nascimento:</label>
        <input type="date" id="data_nascimento" name="data_nascimento" required>

        <label for="identidade">Número de Identidade:</label>
        <input type="text" id="identidade" name="identidade" required>

        <label for="telefone">Telefone:</label>
        <input type="number" id="telefone" name="telefone" required>

        <label for="rua">Rua:</label>
        <input type="text" id="rua" name="rua" required>

        <label for="bairro">Bairro:</label>
        <input type="text" id="bairro" name="bairro" required>

        <label for="cidade">Cidade:</label>
        <input type="text" id="cidade" name="cidade" required>

        <label for="profissao">Profissão:</label>
        <input type="text" id="profissao" name="profissao" required>

        <label for="escolaridade">Escolaridade:</label>
        <select id="escolaridade" name="escolaridade" required>
            <option value="">Selecione o nível de escolaridade</option>
            <option value="Fundamental">Ensino Fundamental</option>
            <option value="Médio">Ensino Médio</option>
            <option value="Superior">Ensino Superior</option>
            <option value="Pós-graduação">Pós-graduação</option>
            <option value="Não Estudando">Não está estudando</option>
        </select>

        <button type="submit">Cadastrar Cliente</button>
    </form>

    <h2>Lista de Clientes Cadastrados</h2>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Nome Completo</th>
                
            </tr>
            {% for cliente in clientes %}
            <tr>
                <!-- Tornando o nome do cliente clicável -->
                <td><a href="{{ url_for('visualizar_cliente', id=cliente.id) }}" target="_blank">{{ cliente.id }}</a></td>
                <td><a href="{{ url_for('visualizar_cliente', id=cliente.id) }}" target="_blank">{{ cliente.nome_completo }}</a></td>
                <td>
                    <a href="{{ url_for('editar_cliente', id=cliente.id) }}">Editar</a>
                    <form action="{{ url_for('deletar_cliente', id=cliente.id) }}" method="POST" style="display:inline;">
                        <button type="submit" onclick="return confirmarExclusao()">Excluir</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </table>
        
        <script>
            function confirmarExclusao() {
                return confirm("Você realmente deseja excluir este cliente?");
            }
        </script>

    <!-- Script para exibir e ocultar o formulário -->
    <script>
        function toggleForm() {
            var form = document.getElementById("cadastroForm");
            var button = document.getElementById("showFormButton");

            if (form.style.display === "none") {
                form.style.display = "block";
                button.innerText = "Cancelar Cadastro";
            } else {
                form.style.display = "none";
                button.innerText = "Novo Cadastro";
            }
        }
    </script>
    
{% endblock %}
